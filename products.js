const products = {
    ar: [
        { 
            name: 'Naruto Poster', 
            imageUrl: 'images/anime/naruto.jpg', 
            sizes: {'A4': 15.0, 'A5': 12.0, 'A4 LANDSCAPE': 16.0, 'A5 LANDSCAPE': 13.0 } 
        },
        
    ],
    anime: [
        { 
            name: 'Pink Floyd Poster', 
            imageUrl: 'images/music/pinkfloyd.jpg', 
            sizes: {
                'A4': 20.0, 'A5': 17.0, 'A4 LANDSCAPE': 22.0, 'A5 LANDSCAPE': 18.0 
            } 
        },
        { 
            name: 'Taylor Swift Poster', 
            imageUrl: 'image/Product/Poater/music/Taylor-1.jpg', 
            sizes: {
                'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 
            } 
        }
    ],
    music: [
        { 
            name: 'Taylor Swift 1', 
            imageUrl: 'image/Product/Poater/music/music (1).jpg', 
            sizes: {
                'A4': 20.0, 'A5': 17.0, 'A4 LANDSCAPE': 22.0, 'A5 LANDSCAPE': 18.0 
            } 
        }
        ,{ 
            name: 'Taylor Swift 2', 
            imageUrl: 'image/Product/Poater/music/music (13).jpg', 
            sizes: {
                'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0,'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'Taylor Swift 3', 
            imageUrl: 'image/Product/Poater/music/music (14).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 4', 
            imageUrl: 'image/Product/Poater/music/music (15).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 5', 
            imageUrl: 'image/Product/Poater/music/music (16).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 6', 
            imageUrl: 'image/Product/Poater/music/music (17).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 7', 
            imageUrl: 'image/Product/Poater/music/music (18).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 8', 
            imageUrl: 'image/Product/Poater/music/music (19).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'PINK FLOYD 1 ', 
            imageUrl: 'image/Product/Poater/music/music (20).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'PINK FLOYD 1', 
            imageUrl: 'image/Product/Poater/music/music (21).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor SwifT 9', 
            imageUrl: 'image/Product/Poater/music/music (22).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Barbie Poster', 
            imageUrl: 'image/Product/Poater/music/music (23).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
        ,{ 
            name: 'Taylor Swift 10', 
            imageUrl: 'image/Product/Poater/music/music (24).jpg', 
            sizes: {'A4': 18.0, 'A5': 15.0, 'A4 LANDSCAPE': 19.0, 'A5 LANDSCAPE': 16.0 } 
        }
    ],movie : [
        { 
            name: 'Pink Floyd Poster', 
            imageUrl: 'images/music/pinkfloyd.jpg', 
            sizes: {
                'A4': 20.0, 
                'A5': 17.0, 
                'A4 LANDSCAPE': 22.0, 
                'A5 LANDSCAPE': 18.0 
            } 
        },
        { 
            name: 'Taylor Swift Poster', 
            imageUrl: 'image/Product/Poater/music/Taylor-1.jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
    ],
    sports: [
        { 
            name: 'Coders Poster', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (1).jpg', 
            sizes: {
                'A4': 20.0, 
                'A5': 17.0, 
                'A4 LANDSCAPE': 22.0, 
                'A5 LANDSCAPE': 18.0 
            } 
        }
        ,{ 
            name: 'Push Your self', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (11).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'chees lover', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (12).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'DREAM + WORK =SUCCESS', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (13).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'DINOSOUR', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (14).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'HELLO WORLD', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (15).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'CODE WITH CODFFE', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (16).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'DEAD LIFT GYM', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (17).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
        ,{ 
            name: 'FIGTH GYM', 
            imageUrl: 'image/Product/Poater/Motivatinal/moti (22).jpg', 
            sizes: {
                'A4': 18.0, 
                'A5': 15.0, 
                'A4 LANDSCAPE': 19.0, 
                'A5 LANDSCAPE': 16.0 
            } 
        }
    ],
};

let selectedSize = {}; // Object to track selected sizes per product

function showCategory(category) {
    const productList = document.getElementById('product-list');
    productList.innerHTML = ''; // Clear previous products

    if (products[category]) {
        products[category].forEach(product => {
            const defaultSize = Object.keys(product.sizes)[0]; // Get the first size as default
            selectedSize[product.name] = defaultSize; // Set default selected size
            
            const productElem = document.createElement('div');
            productElem.className = 'card';
            productElem.innerHTML = `
                <div class="card-img">
                    <img src="${product.imageUrl}" alt="${product.name}" class="product-image">
                </div>
                <h3 class="card-title">${product.name}</h3>
                <p class="card-price" id="price-${product.name}">$${product.sizes[defaultSize].toFixed(2)}</p>
                <div class="size-selection">
                    ${Object.keys(product.sizes).map(size => `
                        <button class="card-btn" onclick="selectSize('${product.name}', '${size}', ${product.sizes[size]}, this)">
                            ${size}
                        </button>
                    `).join('')}
                </div>
                <button onclick="addToCart('${product.name}', '${defaultSize}', ${product.sizes[defaultSize]}, '${product.imageUrl}')" class="card-btn add-to-cart">Add to Cart</button>
            `;
            productList.appendChild(productElem);
        });
    } else {
        productList.innerHTML = '<p>No products available for this category.</p>';
    }
}

// Function to handle size selection and update price
function selectSize(productName, size, price, button) {
    selectedSize[productName] = size; // Update selected size
    
    // Remove 'active' class from all buttons within the parent
    const buttons = button.parentElement.getElementsByClassName('card-btn');
    Array.from(buttons).forEach(btn => btn.classList.remove('active'));

    // Add 'active' class to the clicked button
    button.classList.add('active');

    // Update the displayed price
    document.getElementById(`price-${productName}`).textContent = `$${price.toFixed(2)}`;
}

// Function to handle adding items to the cart
function addToCart(productName, size, price, imageUrl) {
    if (!selectedSize[productName]) {
        alert('Please select a size before adding to the cart.');
        return;
    }

    const cartItem = {
        name: productName,
        size: size,
        price: price,
        imageUrl: imageUrl,
        quantity: 1
    };

    // Check if the item is already in the cart
    const existingItemIndex = cartItems.findIndex(item => 
        item.name === productName && item.size === size
    );

    if (existingItemIndex !== -1) {
        // Item exists, increment the quantity
        cartItems[existingItemIndex].quantity += 1;
    } else {
        // Item doesn't exist, add it to the cart
        cartItems.push(cartItem);
    }

    updateCartDisplay(); // Refresh the cart display
    updateCartCount(); // Update the cart count

    // Reset size button color after adding to cart
    resetSizeButtonColor();
}

// Function to reset the size button color back to normal
function resetSizeButtonColor() {
    const activeButtons = document.querySelectorAll('.card-btn.active');
    activeButtons.forEach(button => button.classList.remove('active'));
}

// Function to update the cart display
function updateCartDisplay() {
    const cartItemsList = document.getElementById('cart-items-list');
    const totalPriceElem = document.getElementById('total-price');
    cartItemsList.innerHTML = ''; // Clear existing items

    let totalPrice = 0;

    cartItems.forEach((item, index) => {
        const itemElem = document.createElement('div');
        itemElem.className = 'cart-item';
        itemElem.innerHTML = `
            <img src="${item.imageUrl}" alt="${item.name}" class="cart-item-img">
            <div class="cart-item-details">
                <p class="product-name">${item.name} - Size: ${item.size}</p>
                <p class="product-price">$${item.price.toFixed(2)} x ${item.quantity}</p>
                <button class="remove-item-btn" onclick="removeFromCart(${index})">Remove</button>
            </div>
        `;
        cartItemsList.appendChild(itemElem);
        totalPrice += item.price * item.quantity;
    });

    totalPriceElem.textContent = totalPrice.toFixed(2); // Update total price
}

window.onload = function() {
    showCategory('anime'); // Default category
};
